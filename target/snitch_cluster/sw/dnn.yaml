# Copyright 2023 ETH Zurich and University of Bologna.
# Licensed under the Apache License, Version 2.0, see LICENSE for details.
# SPDX-License-Identifier: Apache-2.0

# This file contains all tests that require the software to be built with
# custom builtins and custom RISC-V instructions

runs:
  - elf: tests/build/data_mover.elf
  - elf: tests/build/interrupt.elf
  - elf: tests/build/openmp_parallel.elf
  - elf: tests/build/openmp_for_static_schedule.elf
  - elf: tests/build/openmp_double_buffering.elf
  - elf: apps/blas/axpy/build/axpy.elf
    cmd: [../../../sw/blas/axpy/verify.py, "${sim_bin}", "${elf}"]
  - elf: apps/blas/gemm/build/gemm.elf
    cmd: [../../../sw/blas/gemm/verify.py, "${sim_bin}", "${elf}"]
  - elf: apps/dnn/batchnorm/build/batchnorm.elf
  - elf: apps/dnn/linear/build/linear.elf
  - elf: apps/dnn/maxpool/build/maxpool.elf
  - elf: apps/dnn/gemm/build/gemm.elf
  # - elf: apps/dnn/gelu/build/gelu.elf # seems like it stalls
  # - elf: apps/dnn/conv2d/build/conv2d.elf # fails with exit code 32
  # - elf: apps/dnn/fusedconv/build/fusedconv.elf # fails newly
  # - elf: apps/dnn/layernorm/build/layernorm.elf
  #   throws illegal instruction on FDIV in simulation
  # - elf: apps/dnn/softmax/build/softmax.elf
  #   throws illegal instruction on FDIV in simulation
